---
title: Motor Control Specifications
description: Motor types, control algorithms, and operating constraints

requirements:
  
  - id: "MC-001"
    title: "Support BLDC Motor with FOC"
    rationale: "BLDC motors are widely used in industrial applications; FOC provides efficiency and smooth torque"
    content:
      given: "A 3-phase BLDC motor with Hall sensors is connected to the system"
      when: "Motor start command is issued"
      then: "System applies Field-Oriented Control algorithm with electronic commutation"
  - id: "MC-002"
    title: "Support PMSM Motor with FOC"
    rationale: "PMSM motors offer better efficiency; FOC control enables precise torque control"
    content:
      given: "A 3-phase PMSM motor with encoder feedback is connected"
      when: "System initializes and reads encoder position"
      then: "FOC algorithm operates in dq reference frame with continuous rotor position tracking"
  
  - id: "MC-003"
    title: "PWM Frequency Between 10-20 kHz"
    rationale: "Frequency range balances switching losses, EMI, and control bandwidth for embedded systems"
    content:
      given: "System configures PWM timing"
      when: "PWM frequency is set to any value"
      then: "Value must be between 10 kHz minimum and 20 kHz maximum"
  - id: "MC-004"
    title: "Configurable PWM Frequency"
    rationale: "Different motors and loads may require different PWM frequencies for optimal performance"
    content:
      given: "User wants to adjust PWM frequency for specific application"
      when: "PWM frequency parameter is modified via serial or CAN interface"
      then: "System applies new frequency to all subsequent PWM generation cycles"
  
  - id: "MC-005"
    title: "Monitor All Three Motor Phase Currents"
    rationale: "All three phase currents are required for accurate FOC control and fault detection"
    content:
      given: "FOC control loop is executing"
      when: "ADC sampling is triggered at PWM frequency"
      then: "Phase A, B, and C currents are simultaneously measured (or Phase C derived from A+B)"
  - id: "MC-006"
    title: "Real-Time Current Feedback"
    rationale: "Real-time feedback enables responsive current control and over-current protection"
    content:
      given: "Motor is running under load"
      when: "Each PWM cycle completes"
      then: "Current feedback is updated within 5 microseconds for FOC calculation"
  
  - id: "MC-007"
    title: "Hall Sensor Commutation Support"
    rationale: "Hall sensors provide reliable low-cost commutation feedback for BLDC motors"
    content:
      given: "Three Hall effect sensors are connected to the system"
      when: "Motor rotates, generating hall transitions"
      then: "System detects 6-state Hall pattern and derives motor position and speed"
  - id: "MC-008"
    title: "Hall Sensor Speed Calculation"
    rationale: "Speed feedback from Hall edges enables closed-loop velocity control"
    content:
      given: "Hall sensor generates edge transitions"
      when: "Motor rotates at constant speed"
      then: "System calculates speed from Hall edge rate and updates velocity reference"
  
  - id: "MC-009"
    title: "Optional Encoder Support"
    rationale: "Encoder feedback improves commutation accuracy and enables better speed control"
    content:
      given: "High-resolution encoder is connected to motor shaft"
      when: "System reads encoder position"
      then: "FOC algorithm refines rotor position estimate and improves torque smoothness"
  
  - id: "MC-010"
    title: "Configurable Motor Pole Pairs"
    rationale: "Different motors have different pole pair counts; parameter must be adjustable"
    content:
      given: "System initializes motor control"
      when: "Pole pair parameter is set via serial or CAN interface"
      then: "Value is stored in non-volatile memory and used for speed/position calculations"
  - id: "MC-011"
    title: "Configurable Phase Resistance"
    rationale: "Motor resistance varies by design; configuration enables accurate control model"
    content:
      given: "Motor phase resistance is known (measured or from datasheet)"
      when: "Parameter is entered via configuration interface"
      then: "Value is used for voltage drop calculation and thermal estimation"
  - id: "MC-012"
    title: "Configurable Phase Inductance"
    rationale: "Motor inductance affects current ripple and control loop stability"
    content:
      given: "Motor electrical parameters are being configured"
      when: "Phase inductance value is provided"
      then: "Parameter is stored and used in FOC control loop for improved accuracy"
  - id: "MC-013"
    title: "Configurable Back-EMF Constant"
    rationale: "Ke constant is motor-specific and essential for speed estimation and voltage limiting"
    content:
      given: "Motor back-EMF characteristics are known"
      when: "Ke parameter is configured"
      then: "Value is used for speed-voltage calculations and control algorithm"
  - id: "MC-014"
    title: "Configurable Maximum Motor Current"
    rationale: "Current limit protects motor and power stage from damage"
    content:
      given: "Safe operating current for motor is determined"
      when: "I_max parameter is set via interface"
      then: "System enforces this limit in FOC controller and triggers fault if exceeded"
  
  - id: "MC-015"
    title: "FOC operates in dq Reference Frame"
    rationale: "dq frame decouples flux and torque control, simplifying PI controller tuning"
    content:
      given: "FOC inner loop executes"
      when: "Park transformation is applied to three-phase currents"
      then: "Currents are transformed to orthogonal Id and Iq components in rotor reference frame"
  - id: "MC-016"
    title: "Independent PI Controllers for Id and Iq"
    rationale: "Separate controllers enable independent flux and torque adjustment"
    content:
      given: "FOC inner loop is running"
      when: "PI controllers update"
      then: "Id controller maintains flux reference, Iq controller regulates torque current"
  - id: "MC-017"
    title: "Space Vector Modulation for PWM"
    rationale: "SVM provides more efficient PWM pattern compared to standard PWM"
    content:
      given: "dq voltage references are calculated by PI controllers"
      when: "SVM algorithm processes voltage references"
      then: "Six-step PWM pattern is generated with 33% reduced harmonic distortion vs standard PWM"
